sap.ui.define(["jquery.sap.global","sap/ui/core/ValueState","sap/m/MultiComboBox","sap/m/ComboBoxBase"],function(a,b,c,d){"use strict";return c.extend("tepaup.controls.MultiComboBox",{metadata:{},oninput:function(b){d.prototype.oninput.apply(this,arguments);var c=b.target.value;if(this.getEnabled()&&this.getEditable()){var e=this._getItemsLikeText(c),f=!!e.length;if(!f&&""!==c)return this.updateDomValue(this._sOldValue||""),this._iOldCursorPos&&a(this.getFocusDomRef()).cursorPos(this._iOldCursorPos),void this._showWrongValueVisualEffect();var g=this.getSelectableItems();this._sOldInput&&this._sOldInput.length>c.length&&(g=this.getItems()),g.forEach(function(a){var b=a.getText().toLowerCase(),d=a.getKey().toLowerCase(),e=""!==c&&(this._isItemExistsLikeValue(b,c)||this._isItemExistsLikeValue(d,c));""===c&&(e=!0);var f=this.getListItem(a);f&&f.setVisible(e)},this),this._setContainerSizes(),this.getValue()&&f?this.open():this.close(),this._sOldInput=c}},_getItemsLikeText:function(a){var b=[];return this.getSelectableItems().forEach(function(c){var d=c.getText().toLowerCase(),e=c.getKey().toLowerCase();(this._isItemExistsLikeValue(d,a)||this._isItemExistsLikeValue(e,a))&&b.push(c)},this),b},_isItemExistsLikeValue:function(a,b){var c=a.match(new RegExp(b,"i"));return null!==c&&c.length>0},_isItemExistsStartingValue:function(b){return this.getItems().some(a.proxy(function(a){return this._isItemExistsLikeValue(a.getText(),b)||this._isItemExistsLikeValue(a.getKey(),b)},this))},onsapenter:function(a){var b=a.srcControl;b.getSelected()||b.setSelected(!0),a.setMarked(),this.close()},_checkEnteredValue:function(c,d){if(!this._isItemExistsStartingValue(c)){d.preventDefault();var e=this.getValueState();return e===b.Error||e===b.Success||e===b.Warning?(this.$().removeClass("sapMInputBase"+e),a.sap.delayedCall(300,this.$(),"addClass",["sapMInputBase"+e])):(this.$().addClass("sapMInputBaseError"),a.sap.delayedCall(300,this.$(),"removeClass",["sapMInputBaseError"])),!1}return!0},renderer:{}})});