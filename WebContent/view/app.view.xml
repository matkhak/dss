<?xml version="1.0" encoding="UTF-8" ?>
<mvc:View
    controllerName="controller.App"
    displayBlock="true"
    xmlns="sap.m"
   
    class="appView"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:custom="controls"
    xmlns:unified="sap.ui.unified"
    xmlns:core="sap.ui.core"

>
  <custom:Shell
  icon="img/surgutneftegaz_small.png"
  id="myShell"
  showPane="false"
  showCurtain="false"
  showCurtainPane="false"
  headerHiding="false"
  title="Аналитическое рабочее место специалиста УОиОТ ОАО «Сургутнефтегаз»"
  >
    <custom:content>
      <SplitApp id="appID" mode="HideMode">
        <masterPages>
          <Page title="Список конфигураций">
            <subHeader>
              <Toolbar>
                <SearchField
                        liveChange="onLiveSearch"
                        width="100%" />
              </Toolbar>
            </subHeader>
            <content>
              <List   id="confList"
                      noDataText="Нет сохраненных конфигураций"
                      mode="SingleSelectMaster"
                      rememberSelections="false"
                      select="handleConfigSelection"
                      items="{
                        path: 'gSettings>/configs',
                        sorter : {
                          path : 'name' 
                        }
                      }">
                <items>
                  <CustomListItem class="config">
                    <VBox>
                      <Text class="config__title" text="{gSettings>name}" />
                      <HBox class="config__box">
                        <Text text="Автор: {gSettings>user}" />
                        <core:Icon class="config__favorite"
                                   src="{path: 'gSettings>favorite', formatter: '.favoriteFormatter'}"
                                   press="onToggleFavorite"/>
                        <core:Icon class="config__delete"
                                   src="sap-icon://delete"
                                   press="onOpenDeleteDialog"
                                   visible="{gSettings>editable}"
                        />
                      </HBox>
                      <Text text="Изменено: {gSettings>updated}" />
                    </VBox>
                  </CustomListItem>
                </items>
              </List>
            </content>
            <footer>
              <Toolbar/>
            </footer>
          </Page>
        </masterPages>
        <detailPages>
          <Page
                  class="tpRootPage"
                  showFooter="false"
                  enableScrolling="false"
          >
            <customHeader>
              <Bar>
                <contentRight>
                  <Button
                    id="navToDetailButton"
                    text="Перейти к анализу"
                    iconFirst="false"
                    icon="sap-icon://arrow-right"
                    press="navToDetail"
                  />
                </contentRight>
                <contentLeft>
                  <Button
                    id="navToMainButton"
                    text="Перейти к выбору показателей"
                    iconFirst="true"
                    visible="false"
                    icon="sap-icon://arrow-left"
                    press="navToMain"
                  />
                </contentLeft>
              </Bar>
            </customHeader>
            <content>
              <mvc:XMLView
                      viewName="view.topArea"
                      class="tpRootPage__topAreaView"
              />
              <NavContainer
                      id="navContainer"
                      class="tpRootPage__pagesNavContainer"
              />
            </content>
          </Page>
        </detailPages>
      </SplitApp>
    </custom:content>

    <custom:user>
      <unified:ShellHeadUserItem
              username="{gSettings>/session/UserName}"
              image="sap-icon://account"
              tooltip="{i18n>headerActionsTooltip}"
      />
    </custom:user>
  </custom:Shell>
</mvc:View>
